<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>PHAR3311 Binding Model</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom fonts -->
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">

    <!-- Custom style -->
    <link href="css/style.css" type="text/css" rel="stylesheet">

  </head>


    <body>

      <!-- Navigation -->
      <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top">
        <div class="container">
          <a class="navbar-brand" href="index.html">Molecular Pharmacology Methods Binding Tool</a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarResponsive">
            <ul class="navbar-nav ml-auto">
              <li class="nav-item">
                <a class="nav-link" href="development.html">Development Tool</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="assessment.html">Self-Assessment Tool</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="quiz.html">Quiz</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" data-toggle="modal" data-target="#logki">-Log K<sub>i</sub> Reference Table</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" data-toggle="modal" data-target="#assumptions">Assumptions of the Model</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>

      <!-- logki Modal -->
      <div class="modal fade" id="logki" role="dialog">
        <div class="modal-dialog">
          <!-- Modal content -->
          <div class="modal-content">
            <div class="modal-header">
              <h5>-Log K<sub>i</sub> Reference Table</h5>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
                  <p>Hypothetical ligands have been included in the model to increase its applicability.</p>
                  <p>Ligand A and Ligand B are examples of ligands that have marked differences in affinities (-log K<sub>i</sub> values) for receptor subtypes (not evident with established ligands).</p>
                  <p>You can nominate affinities (-log K<sub>i</sub> values) for Ligand C and D.</p>
                  <table class="table table-hover">
                  <thead>
                    <tr>
                      <th class="th1" style="vertical-align:middle; text-align:left;" rowspan=2>Competing<br>Ligand</th>
                      <th class="th1" colspan=5>-Log K<sub>i</sub> Value</th>
                    </tr>
                    <tr>
                      <th class="th1">M<sub>1</sub></th>
                      <th class="th1">M<sub>2</sub></th>
                      <th class="th1">M<sub>3</sub></th>
                      <th class="th1">M<sub>4</sub></th>
                      <th class="th1">M<sub>5</sub></th>
                    </tr>
                    <tr>
                      <th colspan=6>Established</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td class="ligTitle">Atropine</td>
                      <td>9.0</td>
                      <td>8.8</td>
                      <td>9.3</td>
                      <td>8.9</td>
                      <td>9.2</td>
                    </tr>
                    <tr>
                      <td class="ligTitle">Pirenzepine</td>
                      <td>8.2</td>
                      <td>6.5</td>
                      <td>6.9</td>
                      <td>7.4</td>
                      <td>7.2</td>
                    </tr>
                    <tr>
                      <td class="ligTitle">Methoctramine</td>
                      <td>6.7</td>
                      <td>7.7</td>
                      <td>6.0</td>
                      <td>7.0</td>
                      <td>6.3</td>
                    </tr>
                    <tr>
                      <td class="ligTitle">Darifenacin</td>
                      <td>7.8</td>
                      <td>8.0</td>
                      <td>8.8</td>
                      <td>7.7</td>
                      <td>8.0</td>
                    </tr>
                    <tr>
                      <td class="ligTitle">MT-3</td>
                      <td>6.7</td>
                      <td>5.9</td>
                      <td>6.0</td>
                      <td>8.1</td>
                      <td>6.0</td>
                    </tr>
                    <tr>
                      <td class="ligTitle">S-Secoverine</td>
                      <td>8.0</td>
                      <td>7.9</td>
                      <td>7.7</td>
                      <td>7.7</td>
                      <td>6.5</td>
                    </tr>
                    <tr>
                      <td class="ligTitle">Solifenacin</td>
                      <td>7.6</td>
                      <td>6.8</td>
                      <td>7.9</td>
                      <td>7.0</td>
                      <td>7.5</td>
                    </tr>
                    <tr>
                      <td class="ligTitle">DAU-5884</td>
                      <td>8.9</td>
                      <td>7.1</td>
                      <td>8.9</td>
                      <td>8.5</td>
                      <td>8.1</td>
                    </tr>
                  </tbody>
                  <thead>
                    <tr>
                      <th colspan=6>Hypotethical</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td class="ligTitle">Ligand A</td>
                      <td>9.0</td>
                      <td>9.0</td>
                      <td>6.0</td>
                      <td>6.0</td>
                      <td>2.0</td>
                    </tr>
                    <tr>
                      <td class="ligTitle">Ligand B</td>
                      <td>8.0</td>
                      <td>5.0</td>
                      <td>8.0</td>
                      <td>5.0</td>
                      <td>8.0</td>
                    </tr>
                    <tr data-toggle="tooltip" data-placement="bottom" title="select your own values">
                      <td class="ligTitle">Ligand C</td>
                      <td>*</td>
                      <td>*</td>
                      <td>*</td>
                      <td>*</td>
                      <td>*</td>
                    </tr>
                    <tr data-toggle="tooltip" data-placement="bottom" title="select your own values">
                      <td class="ligTitle">Ligand D</td>
                      <td>*</td>
                      <td>*</td>
                      <td>*</td>
                      <td>*</td>
                      <td>*</td>
                    </tr>
                  </tbody>
              </tr>
              </table>
            </div>
            <div class="modal-footer">
              <button type="button" class="nav-link" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Assumptions Modal -->
      <div class="modal fade" id="assumptions" role="dialog">
        <div class="modal-dialog">
          <!-- Modal content -->
          <div class="modal-content">
            <div class="modal-header">
              <h5>Assumptions of the Model</h5>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
              <ol>
                <li class="lihead">All of the usual assumptions associated with Law of Mass Action that typically describe drug binding to receptors</li>
                <ul>
                  <li>All receptors are equally accessible to ligands.</li>
                  <li>All receptors are either free or bound to ligand - i.e. the model ignores any states of partial binding.</li>
                  <li>Neither ligand nor receptor are altered by binding.</li>
                  <li>Binding is reversible.</li>
                </ul>
                <br>
                <li class="lihead">Assumptions associated with competition binding studies</li>
                <ul>
                  <li>Only a small fraction of both the labelled and unlabelled ligands has bound, so the free concentration is virtually the same as the added concentration.</li>
                  <li>There is no cooperativity â€“ binding to one binding site does not alter affinity at another site.</li>
                  <li>The experiment has reached equilibrium.</li>
                  <li>Binding is reversible and follows the law of mass action.</li>
                </ul>
                <br>
                <li class="lihead">Other model-specific assumptions</li>
                <ul>
                  <li>Analysis is conducted using % Specific Binding (no non-specific binding)</li>
                  <li>[<sup>3</sup>H-QNB] used in studies was << K<sub>A</sub> of <sup>3</sup>H-QNB for receptors present,  i.e.  Cheng-Prusoff equation reduces to IC<sub>50</sub> &cong; K<sub>i</sub> for all competing ligands.</li>
                </ul>
              </ol>
            </div>
            <div class="modal-footer">
              <button type="button" class="nav-link" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Header -->
      <header class="dev-header">
        <div class="container">
          <div class="mainUI">
            <fieldset class="sectionContainer">
              <legend id="quiz_status">Quiz</legend>
            <div>
             <p id="timeleft">Time:</p>
            </div>
            <div id="sectionContainer"></div>

            <script>
              var myVar;
              function startTimer() {
                myVar = setInterval(function(){myTimer()},1000);
                timelimit = maxtimelimit;
              }

              function myTimer() {
                if (timelimit > 0) {
                  curmin=Math.floor(timelimit/60);
                  cursec=timelimit%60;
                  if (cursec.toString().length == 1){
                    cursec = cursec+"0";
                  }
                  if (curmin!=0) { curtime="Time: "+curmin+":"+cursec; }
                            else { curtime="Time: "+"0:"+cursec; }
                  $_('timeleft').innerHTML = curtime;
                } else {
                  $_('timeleft').innerHTML = timelimit+'Out of time';
                  clearInterval(myVar);
                  checkAnswer();
                  renderResults();
                }
                timelimit--;
              }

          // Modified from: http://www.webdeveloper.com/forum/showthread.php?304231-HTML-Random-Quiz-Game-w-Timer

              var pos = 0, posn, choice, correct = 0, rscore = 0;
              var maxtimelimit = 600, timelimit = maxtimelimit;  // 10 minutes entire quiz

              var questions = [
        //  EACH QUESTION WE WILL RANDOMISE SUBTYPE RECEPTOR / DENSITY VALUES FOR QUESTIONS
                  [ "Who's this snacc? <br> <img src='https://scontent.fper2-1.fna.fbcdn.net/v/t1.0-9/16426292_10209372721888231_7079148437469311035_n.jpg?oh=1e81ce5b1930308d36a38795708ebcb6&oe=5A59AAC7' alt='friend' height='300' width='300'>",
                    "Rork","Roarke","Roarrrr XD a hehe","B"],
                  [ "Which is ur pal Roarke?",
                    "<img src='http://www.nova.edu/hpd/otm/pics/4fun/RUNNOSE.JPG' alt=''>",
                    "<img src='http://www.nova.edu/hpd/otm/pics/4fun/Gumby.JPG' alt=''>",
                    "<img src='https://scontent.fper2-1.fna.fbcdn.net/v/t1.0-9/16426292_10209372721888231_7079148437469311035_n.jpg?oh=1e81ce5b1930308d36a38795708ebcb6&oe=5A59AAC7' alt='friend' height='160' width='160'>","C"],
                  [ "What is 10 + 4?", "<img src='https://scontent.fper2-1.fna.fbcdn.net/v/t1.0-9/16426292_10209372721888231_7079148437469311035_n.jpg?oh=1e81ce5b1930308d36a38795708ebcb6&oe=5A59AAC7' alt='friend' height='160' width='160'>", "14", "16", "B" ],
                  [ "What is 20 - 9?", "7", "13", "11", "C" ],
                  [ "What is 7 x 3?", "21", "24", "25", "A" ],
                  [ "What is 8 / 2?", "10", "2", "4", "C" ],
                  [ "What is 8 ^ 2?", "8", "2", "64", "C" ],
                  [ "What is 8 mod 2?", "0", "1", "4", "A" ],
                  [ "What is 6 + 4 + 2?", "12", "14", "16", "A" ],
                  [ "What is 20 - 7?", "7", "13", "11", "B" ]
              ];

              var questionOrder = [];
              var maxNumberOfQuestions = questions.length;
              function setQuestionOrder(){
                questionOrder.length = 0;
                for (var i=0; i<maxNumberOfQuestions; i++){
                  questionOrder.push(i);
                }
              //  questionOrder.sort(randOrd);   // alert(questionOrder);  // shuffle display order
                pos = 0;
                posn = questionOrder[pos];
              }

              function $_(IDS){
                return document.getElementById(IDS);
              }
              function randOrd(){
                return (Math.round(Math.random())-0.5);
              }
              function renderResults(){
                var quiz = $_("sectionContainer");
                quiz.innerHTML = "<h2>You got "+correct+" of "+maxNumberOfQuestions+" questions correct</h2>";
                $_("quiz_status").innerHTML = "quiz Completed";
                $_('timeleft').innerHTML = '';
                quiz.innerHTML += '<button onclick="location.reload()">Restart</a> ';
                setQuestionOrder();
                correct = 0;
                clearInterval(myVar);
                return false;
              }

              function renderQuestion() {
                var quiz = $_("sectionContainer");
                $_("quiz_status").innerHTML = "Question "+(pos+1)+" of "+maxNumberOfQuestions;
                if (rscore != 0) {
                  $_("quiz_status").innerHTML += '<br>Currently: '+(correct/rscore*100).toFixed(0)+'% correct';
                }
                var question = questions[posn][0];
                var chA = questions[posn][1];
                var chB = questions[posn][2];
                var chC = questions[posn][3];
                quiz.innerHTML = "<h3>"+question+"</h3>";
                quiz.innerHTML += "<label><input type='radio' name='choices' value='A'> "+chA+"</label><br>";
                quiz.innerHTML += "<label><input type='radio' name='choices' value='B'> "+chB+"</label><br>";
                quiz.innerHTML += "<label><input type='radio' name='choices' value='C'> "+chC+"</label><br><br>";
                quiz.innerHTML += "<button onclick='checkAnswer()'>Submit Answer</button>";
              }

              function checkAnswer(){
                selected = false;
                var choices = document.getElementsByName("choices");
                for (var i=0; i<choices.length; i++) {
                  if (choices[i].checked) {
                    choice = choices[i].value;
                    selected = true;
                  }
                } if (selected) {
                  rscore++;
                  if (choice == questions[posn][4] && timelimit > 0) {
                    correct++;
                  }
                  pos++;
                  posn = questionOrder[pos];
                  if (pos < maxNumberOfQuestions) {
                    renderQuestion();
                  } else {
                    renderResults();
                  }
                } else {
                  alert("Please select an answer");
                }
              }

              window.onload = function() {
                timelimit = maxtimelimit;
                clearInterval(myVar);
                startTimer();
                setQuestionOrder();
                renderQuestion();
              }

            </script>
          </div>
        </div>
      </div>
    </header>

      <!-- Footer -->
      <footer>
        <div class="container">
          <ul class="list-inline">
            <li class="list-inline-item">
              <a data-toggle="modal" href="#about">About</a>
            </li>
            <li class="footer-menu-divider list-inline-item">&sdot;</li>
            <li class="list-inline-item">
              <a data-toggle="modal" href="#instructions">Instructions</a>
            </li>
            <li class="footer-menu-divider list-inline-item">&sdot;</li>
            <li class="list-inline-item">
              <a data-toggle="modal" href="#contact">Contact</a>
            </li>
          </ul>
          <p class="cc text-muted small">Creative Commons <i class="fa fa-creative-commons fa-fw"></i> 2017</p>
        </div>
      </footer>

      <!-- Instructions Modal -->
      <div id="instructions" class="modal fade" role="dialog">
        <div class="modal-dialog">

          <!-- Modal content-->
          <div class="modal-content">
            <div class="modal-header">
              <h5>Instructions</h5>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
              <div class="panel-group" id="accordion">
                <div class="panel panel-default">
                  <div class="panel-heading">
                    <p class="lihead">
                      <a data-toggle="collapse" data-parent="#accordion" href="#collapse1">
                      Development Tool</a>
                    </p>
                  </div>
                  <div id="collapse1" class="panel-collapse collapse in">
                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit,
                    sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad
                    minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea
                    commodo consequat.</p>
                  </div>
                </div>
                <div class="panel panel-default">
                  <div class="panel-heading">
                    <p class="lihead">
                      <a data-toggle="collapse" data-parent="#accordion" href="#collapse2">
                      Self-Assessment Tool</a>
                    </p>
                  </div>
                  <div id="collapse2" class="panel-collapse collapse">
                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit,
                    sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad
                    minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea
                    commodo consequat.</p>
                  </div>
                </div>
                <div class="panel panel-default">
                  <div class="panel-heading">
                    <p class="lihead">
                      <a data-toggle="collapse" data-parent="#accordion" href="#collapse3">
                      Quiz</a>
                    </h4>
                  </div>
                  <div id="collapse3" class="panel-collapse collapse">
                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit,
                    sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad
                    minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea
                    commodo consequat.</p>
                  </div>
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
          </div>

        </div>
      </div>

      <!-- About Modal -->
      <div id="about" class="modal fade" role="dialog">
        <div class="modal-dialog">

          <!-- Modal content-->
          <div class="modal-content">
            <div class="modal-header">
              <h5>About</h5>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
              <p>Some text in the modal.</p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
          </div>

        </div>
      </div>

      <!-- Contact Modal -->
      <div id="contact" class="modal fade" role="dialog">
        <div class="modal-dialog">

          <!-- Modal content-->
          <div class="modal-content">
            <div class="modal-header">
              <h5>Contact</h5>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
              <p>Some text in the modal.</p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
          </div>

        </div>
      </div>

      <!-- Bootstrap core JavaScript -->
      <script src="vendor/jquery/jquery.min.js"></script>
      <script src="vendor/popper/popper.min.js"></script>
      <script src="vendor/bootstrap/js/bootstrap.min.js"></script>
      <script>
      $(document).ready(function(){
          $('[data-toggle="tooltip"]').tooltip();
      });
      </script>

    </body>

  </html>
